import{_ as n,o as s,c as e,a}from"./app-8ca7f52c.js";const r={},l=a(`<h1 id="暂停-or-恢复-percona-xtradb-集群" tabindex="-1"><a class="header-anchor" href="#暂停-or-恢复-percona-xtradb-集群" aria-hidden="true">#</a> 暂停 or 恢复 Percona XtraDB 集群</h1><p>在外部情况下，可能需要关闭 Percona XtraDB 集群一段时间，然后重新启动它（一些与企业基础设施维护相关的工作等）。</p><p>该文件 <code>deploy/cr.yaml</code> 包含用于此目的的特殊 <code>spec.pause</code> 键。将其设置为 true 正常停止群集：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span><span class="token punctuation">...</span>.
  <span class="token key atrule">pause</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> deploy/cr.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>暂停集群可能需要一些时间，当该过程结束时，您将只看到 Operator Pod 正在运行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl get pods

NAME                                               READY   STATUS    RESTARTS   AGE
percona-xtradb-cluster-operator-79966668bd-rswbk   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          12m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要在集群关闭后启动集群，只需将 <code>spec.pause</code> 密钥恢复为 <code>false</code> 。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> deploy/cr.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启动群集需要一些时间。当所有 Pod 都达到其 Running 状态时，该过程结束：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>NAME                                               READY   STATUS    RESTARTS   AGE
cluster1-haproxy-0                                 <span class="token number">2</span>/2     Running   <span class="token number">0</span>          6m17s
cluster1-haproxy-1                                 <span class="token number">2</span>/2     Running   <span class="token number">0</span>          4m59s
cluster1-haproxy-2                                 <span class="token number">2</span>/2     Running   <span class="token number">0</span>          4m36s
cluster1-pxc-0                                     <span class="token number">3</span>/3     Running   <span class="token number">0</span>          6m17s
cluster1-pxc-1                                     <span class="token number">3</span>/3     Running   <span class="token number">0</span>          5m3s
cluster1-pxc-2                                     <span class="token number">3</span>/3     Running   <span class="token number">0</span>          3m56s
percona-xtradb-cluster-operator-79966668bd-rswbk   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          9m54s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),c=[l];function i(d,p){return s(),e("div",null,c)}const o=n(r,[["render",i],["__file","暂停or恢复 Percona XtraDB 集群.html.vue"]]);export{o as default};
