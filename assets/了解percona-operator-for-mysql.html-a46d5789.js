import{_ as o,r as n,o as h,c as s,b as t,d as e,e as d,a}from"./app-8ca7f52c.js";const l={},c=a('<h1 id="了解-percona-operator-for-mysql" tabindex="-1"><a class="header-anchor" href="#了解-percona-operator-for-mysql" aria-hidden="true">#</a> 了解 Percona Operator for MySQL</h1><p><code>Percona XtraDB Cluster</code> 是一种开源企业 MySQL 解决方案，可帮助您确保应用程序的数据可用性，同时在要求最苛刻的公有云、私有云和混合云环境中提高安全性并简化新应用程序的开发。</p><p>基于 <code>Percona XtraDB Cluster</code> 的 <code>Percona Operator for MySQL</code> 包含在本地或云中基于 Kubernetes 的环境中快速一致地部署和扩展 <code>Percona XtraDB Cluster</code> 实例所需的一切。</p><h2 id="要求" tabindex="-1"><a class="header-anchor" href="#要求" aria-hidden="true">#</a> 要求</h2><p>Operator 是使用 Percona XtraDB Cluster 版本 8.0.32-24.2 和 5.7.42-31.65 开发和测试的。其他选项也可能有效，但尚未经过测试。</p><h3 id="官方支持的平台" tabindex="-1"><a class="header-anchor" href="#官方支持的平台" aria-hidden="true">#</a> 官方支持的平台</h3><p>以下平台已经过测试，并得到 Operator 1.13.0 的正式支持：</p><ul><li>谷歌 Kubernetes 引擎 （GKE） 1.24 - 1.27</li><li>Amazon Elastic Container Service for Kubernetes （EKS） 1.23 – 1.27</li><li>Azure Kubernetes 服务 （AKS） 1.24 - 1.26</li><li>OpenShift 4.10 - 4.13</li><li>Minikube 1.30（基于 Kubernetes 1.27）</li></ul><p>其他 Kubernetes 平台也可能有效，但尚未经过测试。</p><h3 id="资源限制" tabindex="-1"><a class="header-anchor" href="#资源限制" aria-hidden="true">#</a> 资源限制</h3><p>运行官方支持的平台的集群至少包含三个节点，其中包含以下资源：</p><ul><li>2GB 内存，</li><li>每个节点 2 个 CPU 线程，用于 Pod 配置，</li><li>至少 60GB 的可用存储空间用于持久卷配置。</li></ul><h2 id="社区论坛" tabindex="-1"><a class="header-anchor" href="#社区论坛" aria-hidden="true">#</a> 社区论坛</h2>',13),p={href:"https://forums.percona.com/c/mysql-mariadb/percona-kubernetes-operator-for-mysql/28?utm_campaign=Doc%20pages",target:"_blank",rel:"noopener noreferrer"},i=a('<h2 id="设计概述" tabindex="-1"><a class="header-anchor" href="#设计概述" aria-hidden="true">#</a> 设计概述</h2><p>Percona XtraDB Cluster 集成了与 XtraDB 存储引擎一起运行的 Percona Server for MySQL，以及 Percona XtraBackup 与 Galera 库，以实现同步多主复制。</p><p>Operator 的设计与 Percona XtraDB 集群高可用性实现高度绑定，下图可以简要描述。</p><p><img src="https://assets.moweilong.com/img/replication.svg" alt=""></p><p>作为常规的 MySQL Server 实例，每个节点都包含跨节点同步的同一组数据。建议的配置是至少具有 3 个节点。在具有此数量节点的基本设置中，Percona XtraDB Cluster 提供高可用性，即使您关闭任何节点，它仍会继续运行。此外，HAProxy 路由器可以实现负载平衡，该路由器接受来自 MySQL 客户端的传入流量并将其转发到后端 MySQL 服务器。</p><div class="hint-container tip"><p class="hint-container-title">注意</p><p>（可选）Operator 允许使用 ProxySQL 守护程序而不是 HAProxy，后者提供 SQL 感知数据库工作负载管理，并且与其他负载均衡器相比效率更高。</p></div><p>为了提供高可用性，如果可能，操作员使用节点亲和性在单独的工作节点上运行 Percona XtraDB Cluster 实例。如果某个节点发生故障，则会在另一个节点上自动重新创建 Pod。</p><p>为了为有状态应用程序提供数据存储，Kubernetes 使用持久卷。使用 PersistentVolumeClaim（PVC）实现对 Pod 的自动存储配置。如果发生故障，容器存储接口 （CSI） 应该能够在其他节点上重新挂载存储。PVC StorageClass 必须支持此功能（Kubernetes 和 OpenShift 分别在 1.9 和 3.9 版本中支持此功能）。</p><p>Operator 功能使用 PerconaXtraDBCluster 对象扩展了 Kubernetes API，它是作为 golang 应用程序实现的。每个 PerconaXtraDBCluster 对象都映射到一个单独的 Percona XtraDB Cluster 设置。Operator 侦听所创建对象上的所有事件。当创建新的 PerconaXtraDBCluster 对象或现有对象进行一些更改或删除时，操作员会自动创建/更改/删除所有需要的 Kubernetes 对象，并具有适当的设置，以提供适当的 Percona XtraDB 集群操作。</p><h2 id="比较在-kubernetes-中部署-mysql-的各种解决方案" tabindex="-1"><a class="header-anchor" href="#比较在-kubernetes-中部署-mysql-的各种解决方案" aria-hidden="true">#</a> 比较在 Kubernetes 中部署 MySQL 的各种解决方案</h2><p>有多种方法可以在 Kubernetes 中部署和管理 MySQL。在这里，我们将重点比较以下开源解决方案：</p>',11),b={href:"https://github.com/kubedb",target:"_blank",rel:"noopener noreferrer"},u={href:"https://github.com/bitpoke/mysql-operator/",target:"_blank",rel:"noopener noreferrer"},y={href:"https://github.com/mysql/mysql-operator",target:"_blank",rel:"noopener noreferrer"},S={href:"https://github.com/cybozu-go/moco",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/planetscale/vitess-operator",target:"_blank",rel:"noopener noreferrer"},P={href:"https://github.com/percona/percona-xtradb-cluster-operator/",target:"_blank",rel:"noopener noreferrer"},M={href:"https://github.com/percona/percona-server-mysql-operator/",target:"_blank",rel:"noopener noreferrer"},_=a('<h3 id="通用" tabindex="-1"><a class="header-anchor" href="#通用" aria-hidden="true">#</a> 通用</h3><p>回顾通用功能，例如支持的 MySQL 版本，开源模型等。</p><table><thead><tr><th>功能/产品</th><th>Percona Operator for MySQL (based on PXC)</th><th>Percona Operator for MySQL (based on PS)</th><th>Bitpoke MySQL Operator</th><th>Moco</th><th>Oracle MySQL Operator</th><th>Vitess</th></tr></thead><tbody><tr><td>开源模型</td><td>Apache 2.0</td><td>Apache 2.0</td><td>Apache 2.0</td><td>Apache 2.0</td><td>Apache 2.0</td><td>Apache 2.0</td></tr><tr><td>MySQL 版本</td><td>5.7, 8.0</td><td>8.0</td><td>5.7</td><td>8.0</td><td>8.0</td><td>5.7, 8.0</td></tr><tr><td>Kubernetes 一致性</td><td>测试了各种版本</td><td>测试了各种版本</td><td>不保证</td><td>不保证</td><td>不保证</td><td>不保证</td></tr><tr><td>付费支持</td><td>支持</td><td>支持</td><td>不支持</td><td>不支持</td><td>支持</td><td>不支持</td></tr></tbody></table><h3 id="mysql-拓扑" tabindex="-1"><a class="header-anchor" href="#mysql-拓扑" aria-hidden="true">#</a> MySQL 拓扑</h3><p>专注于复制功能和代理集成。</p><table><thead><tr><th>功能/产品</th><th>Percona Operator for MySQL (based on PXC)</th><th>Percona Operator for MySQL (based on PS)</th><th>Bitpoke MySQL Operator</th><th>Moco</th><th>Oracle MySQL Operator</th><th>Vitess</th></tr></thead><tbody><tr><td>Replication</td><td>Sync with Galera</td><td>Async and Group Replication</td><td>Async</td><td>Semi-sync</td><td>Group Replication</td><td>Async</td></tr><tr><td>Proxy</td><td>HAProxy and ProxySQL</td><td>HAProxy and MySQL Router</td><td>None</td><td>None</td><td>MySQL Router</td><td>VTGate</td></tr><tr><td>Multi-cluster deployment</td><td>支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td></tr><tr><td>Sharding</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>支持</td></tr></tbody></table><h3 id="备份" tabindex="-1"><a class="header-anchor" href="#备份" aria-hidden="true">#</a> 备份</h3><p>以下是每个解决方案的备份和还原功能。</p><table><thead><tr><th>功能/产品</th><th>Percona Operator for MySQL (based on PXC)</th><th>Percona Operator for MySQL (based on PS)</th><th>Bitpoke MySQL Operator</th><th>Moco</th><th>Oracle MySQL Operator</th><th>Vitess</th></tr></thead><tbody><tr><td>定时备份</td><td>支持</td><td>支持</td><td>支持</td><td>支持</td><td>不支持</td><td>支持</td></tr><tr><td>增量备份</td><td>不支持</td><td>不支持</td><td>不支持</td><td>支持</td><td>不支持</td><td>不支持</td></tr><tr><td>PITR</td><td>支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td></tr><tr><td>PVCs for backups</td><td>支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td></tr></tbody></table><h3 id="监控" tabindex="-1"><a class="header-anchor" href="#监控" aria-hidden="true">#</a> 监控</h3><p>监控对于任何运营团队都至关重要。</p><table><thead><tr><th>功能/产品</th><th>Percona Operator for MySQL (based on PXC)</th><th>Percona Operator for MySQL (based on PS)</th><th>Bitpoke MySQL Operator</th><th>Moco</th><th>Oracle MySQL Operator</th><th>Vitess</th></tr></thead><tbody><tr><td>Custom exporters</td><td>通过 sidecar</td><td>通过 sidecar</td><td>mysqld_exporter</td><td>mysqld_exporter</td><td>不支持</td><td>不支持</td></tr><tr><td>PMM</td><td>支持</td><td>支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td></tr></tbody></table><h3 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h3><p>比较不适合分类别的各种功能。</p><table><thead><tr><th>功能/产品</th><th>Percona Operator for MySQL (based on PXC)</th><th>Percona Operator for MySQL (based on PS)</th><th>Bitpoke MySQL Operator</th><th>Moco</th><th>Oracle MySQL Operator</th><th>Vitess</th></tr></thead><tbody><tr><td>Helm</td><td>支持</td><td>支持</td><td>支持</td><td>支持</td><td>支持</td><td>不支持</td></tr><tr><td>传输加密</td><td>支持</td><td>支持</td><td>不支持</td><td>不支持</td><td>支持</td><td>支持</td></tr><tr><td>静态加密</td><td>支持</td><td>支持</td><td>不支持</td><td>不支持</td><td>不支持</td><td>不支持</td></tr></tbody></table>',15);function m(L,O){const r=n("ExternalLinkIcon");return h(),s("div",null,[c,t("p",null,[t("a",p,[e("免费技术帮助"),d(r)])]),i,t("ul",null,[t("li",null,[t("a",b,[e("KubeDB"),d(r)])]),t("li",null,[t("a",u,[e("Bitpoke MySQL Operator (former Presslabs)"),d(r)])]),t("li",null,[t("a",y,[e("Oracle MySQL Operator"),d(r)])]),t("li",null,[t("a",S,[e("Moco by Cybozu"),d(r)])]),t("li",null,[t("a",f,[e("Vitess Operator by PlanetScale"),d(r)])]),t("li",null,[e("Percona Operator for MySQ "),t("ul",null,[t("li",null,[t("a",P,[e("based on Percona XtraDB Cluster"),d(r)])]),t("li",null,[t("a",M,[e("based on Percona Server for MySQL"),d(r)])])])])]),_])}const x=o(l,[["render",m],["__file","了解percona-operator-for-mysql.html.vue"]]);export{x as default};
